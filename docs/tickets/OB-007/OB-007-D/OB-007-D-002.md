# OB-007-D-002: Mostrar impacto de aporte en objetivo

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-007 - Aportes Reales |
| Story | OB-007-D - Visualizacion de aportes para residentes |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, impacto, visualizacion |
| Depends on | OB-007-D-001 |
| Assigned | unassigned |

## Descripcion

Mostrar al residente el impacto de su aporte en el objetivo general, indicando que porcentaje representa su contribucion y como aporta al progreso total.

## Contexto Tecnico

### Archivos afectados
- `src/services/contribution.service.ts`
- `src/api/controllers/residents.controller.ts`

### Enfoque tecnico
Calcular porcentaje del aporte respecto al objetivo total y al total recaudado.

## Criterios de Aceptacion

- [ ] Cada aporte muestra su impacto porcentual en objetivo
- [ ] Muestra contribucion acumulada del apartamento
- [ ] Muestra posicion relativa (ej: "Top 20% contribuidores")
- [ ] Visualizacion motivacional del aporte

## Notas de Implementacion

Response enriquecido por aporte:
```json
{
  "id": "uuid",
  "amount": "50000.00",
  // ... campos base
  "impact": {
    "percentageOfObjective": 0.33,  // Este aporte = 0.33% del objetivo
    "cumulativeContribution": {
      "total": "150000.00",          // Total que ha aportado el apto
      "percentageOfObjective": 1.0   // El apto ha contribuido 1% del objetivo
    },
    "message": "Tu aporte de $50,000 representa el 0.33% del objetivo de $15,000,000"
  }
}
```

Endpoint de resumen de impacto:
```
GET /api/my-contributions/impact?objectiveId=uuid
Response: {
  "objective": {
    "name": "Reparacion ascensores",
    "targetAmount": "15000000.00",
    "collectedAmount": "6500000.00"
  },
  "myContribution": {
    "total": "150000.00",
    "contributionCount": 3,
    "percentageOfObjective": 1.0,
    "percentageOfCollected": 2.3,
    "ranking": "Entre los 15 apartamentos que mas han aportado"
  }
}
```

Nota: El ranking es opcional y debe ser anonimo (no revelar quien aporta mas).

## Testing

- [ ] Porcentajes se calculan correctamente
- [ ] Contribucion acumulada es correcta
- [ ] Mensaje es motivacional y correcto
- [ ] No revela informacion de otros apartamentos
