# OB-014-D-001: Crear componente RoleSwitch

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-014 - Configuracion de Vistas por Rol de Usuario |
| Story | OB-014-D - Componentes compartidos y utilidades de rol |
| Status | pending |
| Priority | medium |
| Created | 2026-01-05 |
| Updated | 2026-01-05 |
| Labels | task, frontend, components, utility |
| Depends on | OB-014-A-002 |
| Assigned | unassigned |

## Descripcion

Crear componente que renderiza contenido diferente segun el rol del usuario actual, util para mostrar UI condicional sin duplicar logica.

## Contexto Tecnico

### Archivos afectados
- `apps/web/src/components/shared/RoleSwitch.tsx`
- `apps/web/src/components/shared/ShowForRole.tsx`

### Enfoque tecnico
Componentes declarativos que encapsulan la logica de verificacion de rol.

## Criterios de Aceptacion

- [ ] RoleSwitch renderiza contenido segun rol
- [ ] ShowForRole muestra/oculta segun rol
- [ ] Soporte para multiples roles
- [ ] Fallback opcional

## Notas de Implementacion

```typescript
// components/shared/RoleSwitch.tsx
'use client';

import { useAuth } from '@/hooks/useAuth';
import { Role } from '@/types/auth';
import { ReactNode } from 'react';

interface RoleSwitchProps {
  admin?: ReactNode;
  resident?: ReactNode;
  fallback?: ReactNode;
}

export function RoleSwitch({ admin, resident, fallback = null }: RoleSwitchProps) {
  const { user, isLoading } = useAuth();

  if (isLoading) return null;

  if (!user) return <>{fallback}</>;

  switch (user.role) {
    case Role.ADMIN:
      return <>{admin ?? fallback}</>;
    case Role.RESIDENT:
      return <>{resident ?? fallback}</>;
    default:
      return <>{fallback}</>;
  }
}

// Uso:
// <RoleSwitch
//   admin={<AdminDashboard />}
//   resident={<ResidentDashboard />}
//   fallback={<div>Cargando...</div>}
// />

// components/shared/ShowForRole.tsx
'use client';

import { useAuth } from '@/hooks/useAuth';
import { Role } from '@/types/auth';
import { ReactNode } from 'react';

interface ShowForRoleProps {
  roles: Role[];
  children: ReactNode;
  fallback?: ReactNode;
}

export function ShowForRole({ roles, children, fallback = null }: ShowForRoleProps) {
  const { user } = useAuth();

  if (!user || !roles.includes(user.role)) {
    return <>{fallback}</>;
  }

  return <>{children}</>;
}

// Uso:
// <ShowForRole roles={[Role.ADMIN]}>
//   <button>Solo admins ven esto</button>
// </ShowForRole>
```

## Testing

- [ ] RoleSwitch renderiza contenido correcto
- [ ] ShowForRole oculta contenido no permitido
- [ ] Fallback se muestra cuando corresponde
