# OB-014-D-009: Scaffold modulo Usuarios y Perfiles

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-014 - Configuracion de Vistas por Permisos y Modulos |
| Story | OB-014-D - Scaffolding de modulos con permisos |
| Status | pending |
| Priority | medium |
| Created | 2026-01-06 |
| Updated | 2026-01-06 |
| Labels | task, frontend, scaffolding, usuarios, perfiles |
| Depends on | OB-014-C |
| Implementa | OB-002 (estructura base) |

## Descripcion

Crear la estructura de archivos para los modulos de Usuarios (admin) y Perfil (usuario) con validacion de permisos configurada. Este scaffold sera el punto de partida para completar OB-002.

## Estructura de Archivos

```
apps/web/src/app/(dashboard)/usuarios/
├── page.tsx                    # Lista de usuarios (admin)
├── [id]/
│   ├── page.tsx                # Detalle del usuario
│   ├── editar/
│   │   └── page.tsx            # Editar usuario
│   ├── permisos/
│   │   └── page.tsx            # Gestionar permisos (SuperAdmin)
│   └── privacidad/
│       └── page.tsx            # Cambiar privacidad (admin)
└── _components/
    └── .gitkeep

apps/web/src/app/(dashboard)/perfil/
├── page.tsx                    # Mi perfil (siempre accesible)
├── editar/
│   └── page.tsx                # Editar mis datos
└── notificaciones/
    └── page.tsx                # Preferencias de notificacion
```

## Permisos por Pagina

### Usuarios (Admin)
| Pagina | Guard | Permiso |
|--------|-------|---------|
| /usuarios | requireModule | users |
| /usuarios/[id] | requirePermission | users:read |
| /usuarios/[id]/editar | requirePermission | users:update |
| /usuarios/[id]/permisos | requireSuperAdmin | - |
| /usuarios/[id]/privacidad | requirePermission | users:manage |

### Perfil (Usuario)
| Pagina | Guard | Permiso |
|--------|-------|---------|
| /perfil | requireAuth | - |
| /perfil/editar | requireAuth | - |
| /perfil/notificaciones | requireAuth | - |

**NOTA**: Las paginas de /perfil solo requieren autenticacion, no permisos especiales. El usuario siempre puede ver y editar su propio perfil.

## Criterios de Aceptacion

- [ ] Estructura de carpetas creada para ambos modulos
- [ ] /perfil accesible para cualquier usuario autenticado
- [ ] /usuarios requiere modulo users
- [ ] Permisos de usuario solo para SuperAdmin
- [ ] Build pasa sin errores

## Referencia de Implementacion

La logica de negocio se implementara en **OB-002: Gestion de Usuarios y Autenticacion**:
- Edicion de perfil propio
- Gestion de usuarios (admin)
- Asignacion de permisos (SuperAdmin)
- Cambios de privacidad (via PQR o admin con justa causa)
