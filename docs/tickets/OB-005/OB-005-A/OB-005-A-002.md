# OB-005-A-002: Implementar CRUD de actividades

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-005 - Actividades de Recaudo |
| Story | OB-005-A - Modelo y CRUD de actividades |
| Status | pending |
| Priority | critical |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, crud, actividad |
| Depends on | OB-005-A-001 |
| Assigned | unassigned |

## Descripcion

Implementar endpoints REST para el CRUD de actividades de recaudo, anidados bajo el objetivo al que pertenecen.

## Contexto Tecnico

### Archivos afectados
- `src/api/routes/actividades.routes.ts`
- `src/api/controllers/actividades.controller.ts`
- `src/services/actividad.service.ts`
- `src/api/validators/actividad.validator.ts`

### Enfoque tecnico
Endpoints anidados bajo objetivo. Solo admins pueden crear/editar, residentes pueden ver.

## Criterios de Aceptacion

- [ ] POST /api/.../objetivos/:objId/actividades - Crear
- [ ] GET /api/.../objetivos/:objId/actividades - Listar
- [ ] GET /api/.../objetivos/:objId/actividades/:id - Obtener
- [ ] PATCH /api/.../objetivos/:objId/actividades/:id - Actualizar
- [ ] DELETE /api/.../objetivos/:objId/actividades/:id - Soft delete
- [ ] Verificar que el objetivo pertenece a la copropiedad
- [ ] Residentes solo lectura

## Notas de Implementacion

Crear actividad:
```
POST /api/copropiedades/:copId/objetivos/:objId/actividades
Body: {
  "nombre": "Rifa de electrodomesticos",
  "descripcion": "Rifa de electrodomesticos donados por comercios locales",
  "tipo": "RIFA",
  "metaActividad": 5000000,
  "fechaInicio": "2025-02-15",
  "fechaFin": "2025-04-15"
}
```

Response (201):
```json
{
  "id": "uuid",
  "nombre": "Rifa de electrodomesticos",
  "tipo": "RIFA",
  "metaActividad": "5000000.00",
  "estado": "ACTIVA",
  "objetivo": {
    "id": "uuid",
    "nombre": "Reparacion ascensores"
  }
}
```

## Testing

- [ ] Admin puede crear actividad
- [ ] Residente no puede crear (403)
- [ ] Actividad se asocia correctamente al objetivo
- [ ] Validacion de datos funciona
