# OB-005-A-002: Implementar CRUD de actividades

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-005 - Actividades de Recaudo |
| Story | OB-005-A - Modelo y CRUD de actividades |
| Status | pending |
| Priority | critical |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, crud, actividad |
| Depends on | OB-005-A-001 |
| Assigned | unassigned |

## Descripcion

Implementar endpoints REST para el CRUD de actividades de recaudo, anidados bajo el objetivo al que pertenecen.

## Contexto Tecnico

### Archivos afectados
- `src/api/routes/activities.routes.ts`
- `src/api/controllers/activities.controller.ts`
- `src/services/activity.service.ts`
- `src/api/validators/activity.validator.ts`

### Enfoque tecnico
Endpoints anidados bajo objetivo. Solo admins pueden crear/editar, residentes pueden ver.

## Criterios de Aceptacion

- [ ] POST /api/.../objectives/:objId/activities - Crear
- [ ] GET /api/.../objectives/:objId/activities - Listar
- [ ] GET /api/.../objectives/:objId/activities/:id - Obtener
- [ ] PATCH /api/.../objectives/:objId/activities/:id - Actualizar
- [ ] DELETE /api/.../objectives/:objId/activities/:id - Soft delete
- [ ] Verificar que el objetivo pertenece a la copropiedad
- [ ] Residentes solo lectura

## Notas de Implementacion

Crear actividad:
```
POST /api/condominiums/:condoId/objectives/:objId/activities
Body: {
  "name": "Rifa de electrodomesticos",
  "description": "Rifa de electrodomesticos donados por comercios locales",
  "type": "RAFFLE",
  "targetAmount": 5000000,
  "startDate": "2025-02-15",
  "endDate": "2025-04-15"
}
```

Response (201):
```json
{
  "id": "uuid",
  "name": "Rifa de electrodomesticos",
  "type": "RAFFLE",
  "targetAmount": "5000000.00",
  "status": "ACTIVE",
  "objective": {
    "id": "uuid",
    "name": "Reparacion ascensores"
  }
}
```

## Testing

- [ ] Admin puede crear actividad
- [ ] Residente no puede crear (403)
- [ ] Actividad se asocia correctamente al objetivo
- [ ] Validacion de datos funciona
