# OB-005-A-001: Crear entidad Actividad con TypeORM

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-005 - Actividades de Recaudo |
| Story | OB-005-A - Modelo y CRUD de actividades |
| Status | pending |
| Priority | critical |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, entidad, typeorm, actividad |
| Depends on | OB-004-A-001 |
| Assigned | unassigned |

## Descripcion

Crear la entidad Actividad con decoradores TypeORM segun los ejemplos del SUMMARY.md seccion 4.2. Una actividad es una forma especifica de recolectar dinero para un objetivo.

## Contexto Tecnico

### Archivos afectados
- `apps/api/src/entities/actividad.entity.ts`
- `apps/api/src/types/actividad.ts`

### Enfoque tecnico
Entidad con relacion obligatoria a Objetivo usando decoradores TypeORM. Tipo de actividad como enum. Meta opcional por actividad.

## Criterios de Aceptacion

- [ ] Entidad Actividad creada con decoradores TypeORM
- [ ] Campos: nombre, descripcion, tipo
- [ ] Relacion obligatoria con Objetivo
- [ ] Campo metaActividad (opcional, diferente de meta del objetivo)
- [ ] Fechas de inicio y fin
- [ ] Estado de la actividad
- [ ] Hereda campos de auditoria de BaseEntity

## Notas de Implementacion

Entidad Actividad con TypeORM:
```typescript
import { Entity, Column, ManyToOne, OneToMany, JoinColumn, Index } from 'typeorm';
import { BaseEntity } from './base.entity';
import { Objetivo } from './objetivo.entity';
import { Compromiso } from './compromiso.entity';
import { Aporte } from './aporte.entity';

export enum TipoActividad {
  RIFA = 'RIFA',
  DONACION = 'DONACION',
  EVENTO = 'EVENTO',
  VENTA = 'VENTA',
  CUOTA = 'CUOTA',
  OTRO = 'OTRO',
}

export enum EstadoActividad {
  ACTIVA = 'ACTIVA',
  PAUSADA = 'PAUSADA',
  FINALIZADA = 'FINALIZADA',
  CANCELADA = 'CANCELADA',
}

@Entity('actividades')
export class Actividad extends BaseEntity {
  @Column()
  nombre: string;

  @Column({ type: 'text', nullable: true })
  descripcion: string;

  @Column({
    type: 'enum',
    enum: TipoActividad,
  })
  tipo: TipoActividad;

  @Column()
  @Index()
  objetivoId: string;

  @ManyToOne(() => Objetivo, (obj) => obj.actividades)
  @JoinColumn({ name: 'objetivoId' })
  objetivo: Objetivo;

  @Column({ type: 'decimal', precision: 15, scale: 2, nullable: true })
  metaActividad: number;

  @Column({ type: 'timestamp' })
  fechaInicio: Date;

  @Column({ type: 'timestamp', nullable: true })
  fechaFin: Date;

  @Column({
    type: 'enum',
    enum: EstadoActividad,
    default: EstadoActividad.ACTIVA,
  })
  estado: EstadoActividad;

  // Relaciones
  @OneToMany(() => Compromiso, (c) => c.actividad)
  compromisos: Compromiso[];

  @OneToMany(() => Aporte, (a) => a.actividad)
  aportes: Aporte[];
}
```

## Testing

- [ ] Migracion se aplica sin errores
- [ ] Se puede crear actividad asociada a objetivo
- [ ] Tipos de actividad cubren casos del SUMMARY
- [ ] Relacion con objetivo es obligatoria
