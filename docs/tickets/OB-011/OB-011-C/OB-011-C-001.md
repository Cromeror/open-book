# OB-011-C-001: Implementar endpoint de estados publicos

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-011 - Visibilidad de Estados de Cuenta |
| Story | OB-011-C - Visualizacion de estados de cuenta publicos |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, estados |
| Depends on | OB-011-A-002 |
| Assigned | unassigned |

## Descripcion

Crear endpoint para consultar estados de cuenta de residentes que han elegido visibilidad publica.

## Criterios de Aceptacion

- [ ] GET /api/public-account-statements implementado
- [ ] Solo accesible si el solicitante es PUBLICO
- [ ] Muestra lista de apartamentos con estado publico
- [ ] Incluye compromisos y aportes por apartamento

## Notas de Implementacion

Request:
```
GET /api/public-account-statements?objectiveId=uuid
Authorization: Bearer <token-public-resident>
```

Response:
```json
{
  "myVisibility": "PUBLIC",
  "apartments": [
    {
      "number": "101",
      "tower": "Tower A",
      "pledges": [
        {
          "activity": "Rifa",
          "pledgedAmount": "50000.00",
          "status": "PARTIAL",
          "totalContributed": "20000.00"
        }
      ],
      "totalContributed": "20000.00",
      "totalPledged": "50000.00"
    }
  ]
}
```

Si el solicitante es PRIVADO:
```json
{
  "error": "Su visibilidad es PRIVADA. Solo usuarios con visibilidad PUBLICA pueden ver estados de otros residentes."
}
```

## Testing

- [ ] Usuario PUBLICO puede ver otros PUBLICOS
- [ ] Usuario PRIVADO no puede ver
- [ ] Datos son correctos
