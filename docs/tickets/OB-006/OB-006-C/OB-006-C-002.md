# OB-006-C-002: Mostrar detalle de compromiso con aportes

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-006 - Compromisos de Aporte |
| Story | OB-006-C - Visualizacion de compromisos para residentes |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, detalle |
| Depends on | OB-006-C-001 |
| Assigned | unassigned |

## Descripcion

Crear endpoint de detalle de compromiso que muestre el historial completo de aportes asociados al compromiso del residente.

## Contexto Tecnico

### Archivos afectados
- `src/api/routes/residents.routes.ts`
- `src/api/controllers/residents.controller.ts`
- `src/services/pledge.service.ts`

### Enfoque tecnico
Detalle enriquecido con lista de aportes ordenados cronologicamente.

## Criterios de Aceptacion

- [ ] GET /api/my-pledges/:id implementado
- [ ] Verifica que el compromiso pertenece al apartamento
- [ ] Muestra historial de aportes asociados
- [ ] Muestra progreso visual (barras, porcentaje)
- [ ] Incluye informacion completa de la actividad

## Notas de Implementacion

Endpoint:
```
GET /api/my-pledges/:id
Authorization: Bearer <token-resident>
```

Response:
```json
{
  "id": "uuid",
  "activity": {
    "id": "uuid",
    "name": "Rifa electrodomesticos",
    "type": "RAFFLE",
    "description": "...",
    "objective": {
      "id": "uuid",
      "name": "Reparacion ascensores"
    }
  },
  "pledgedAmount": "50000.00",
  "notes": "Compromiso de 5 boletas",
  "status": {
    "status": "PARTIAL",
    "totalContributed": "20000.00",
    "pendingAmount": "30000.00",
    "percentage": 40
  },
  "contributions": [
    {
      "id": "uuid",
      "amount": "10000.00",
      "date": "2025-02-15T10:00:00Z",
      "paymentMethod": "CASH",
      "status": "CONFIRMED"
    },
    {
      "id": "uuid",
      "amount": "10000.00",
      "date": "2025-03-01T10:00:00Z",
      "paymentMethod": "TRANSFER",
      "status": "CONFIRMED"
    }
  ],
  "createdAt": "2025-02-01T00:00:00Z"
}
```

## Testing

- [ ] Detalle incluye todos los aportes
- [ ] Compromiso de otro apartamento retorna 404
- [ ] Estado calculado es correcto
- [ ] Aportes ordenados cronologicamente
