# OB-006-C-001: Crear endpoint de mis compromisos

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-006 - Compromisos de Aporte |
| Story | OB-006-C - Visualizacion de compromisos para residentes |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, residentes |
| Depends on | OB-006-A-002, OB-003-C-004 |
| Assigned | unassigned |

## Descripcion

Crear endpoint que liste los compromisos del apartamento del residente autenticado, con su estado de cumplimiento y progreso.

## Contexto Tecnico

### Archivos afectados
- `src/api/routes/residents.routes.ts`
- `src/api/controllers/residents.controller.ts`
- `src/services/pledge.service.ts`

### Enfoque tecnico
Usar el contexto del residente para filtrar por su apartamento automaticamente.

## Criterios de Aceptacion

- [ ] GET /api/my-pledges implementado
- [ ] Filtra automaticamente por apartamento del residente
- [ ] Incluye estado calculado de cada compromiso
- [ ] Agrupado por objetivo/actividad
- [ ] Incluye resumen de totales

## Notas de Implementacion

Endpoint:
```
GET /api/my-pledges?status=PENDING
Authorization: Bearer <token-resident>
```

Response:
```json
{
  "apartment": {
    "id": "uuid",
    "number": "101",
    "tower": "Tower A"
  },
  "summary": {
    "totalPledged": "250000.00",
    "totalContributed": "150000.00",
    "totalPending": "100000.00"
  },
  "pledges": [
    {
      "id": "uuid",
      "activity": {
        "id": "uuid",
        "name": "Rifa electrodomesticos",
        "objective": { "name": "Reparacion ascensores" }
      },
      "pledgedAmount": "50000.00",
      "status": {
        "status": "PARTIAL",
        "totalContributed": "20000.00",
        "pendingAmount": "30000.00",
        "percentage": 40
      },
      "createdAt": "2025-02-01T00:00:00Z"
    }
  ]
}
```

## Testing

- [ ] Residente ve solo sus compromisos
- [ ] Estado calculado es correcto
- [ ] Resumen de totales es correcto
- [ ] Sin apartamento asociado retorna 403
