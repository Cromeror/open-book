# OB-006-C-001: Crear endpoint de mis compromisos

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-006 - Compromisos de Aporte |
| Story | OB-006-C - Visualizacion de compromisos para residentes |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, residentes |
| Depends on | OB-006-A-002, OB-003-C-004 |
| Assigned | unassigned |

## Descripcion

Crear endpoint que liste los compromisos del apartamento del residente autenticado, con su estado de cumplimiento y progreso.

## Contexto Tecnico

### Archivos afectados
- `src/api/routes/residentes.routes.ts`
- `src/api/controllers/residentes.controller.ts`
- `src/services/compromiso.service.ts`

### Enfoque tecnico
Usar el contexto del residente para filtrar por su apartamento automaticamente.

## Criterios de Aceptacion

- [ ] GET /api/mis-compromisos implementado
- [ ] Filtra automaticamente por apartamento del residente
- [ ] Incluye estado calculado de cada compromiso
- [ ] Agrupado por objetivo/actividad
- [ ] Incluye resumen de totales

## Notas de Implementacion

Endpoint:
```
GET /api/mis-compromisos?estado=PENDIENTE
Authorization: Bearer <token-residente>
```

Response:
```json
{
  "apartamento": {
    "id": "uuid",
    "numero": "101",
    "torre": "Torre A"
  },
  "resumen": {
    "totalComprometido": "250000.00",
    "totalAportado": "150000.00",
    "totalPendiente": "100000.00"
  },
  "compromisos": [
    {
      "id": "uuid",
      "actividad": {
        "id": "uuid",
        "nombre": "Rifa electrodomesticos",
        "objetivo": { "nombre": "Reparacion ascensores" }
      },
      "montoComprometido": "50000.00",
      "estado": {
        "estado": "PARCIAL",
        "totalAportado": "20000.00",
        "montoPendiente": "30000.00",
        "porcentaje": 40
      },
      "createdAt": "2025-02-01T00:00:00Z"
    }
  ]
}
```

## Testing

- [ ] Residente ve solo sus compromisos
- [ ] Estado calculado es correcto
- [ ] Resumen de totales es correcto
- [ ] Sin apartamento asociado retorna 403
