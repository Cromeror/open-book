# OB-006-B-002: Crear dashboard de seguimiento de compromisos

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-006 - Compromisos de Aporte |
| Story | OB-006-B - Estados y seguimiento de compromisos |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, dashboard, seguimiento |
| Depends on | OB-006-B-001 |
| Assigned | unassigned |

## Descripcion

Crear endpoint de dashboard que muestre resumen de compromisos por estado, permitiendo a administradores ver rapidamente el panorama de cumplimiento.

## Contexto Tecnico

### Archivos afectados
- `src/api/routes/dashboard.routes.ts`
- `src/api/controllers/dashboard.controller.ts`
- `src/services/dashboard.service.ts`

### Enfoque tecnico
Endpoint agregado que calcula estadisticas de compromisos por actividad u objetivo.

## Criterios de Aceptacion

- [ ] GET /api/.../dashboard/compromisos implementado
- [ ] Resumen por estado (pendiente, parcial, cumplido)
- [ ] Totales en montos (comprometido, aportado, pendiente)
- [ ] Filtrable por actividad u objetivo
- [ ] Solo accesible por administradores

## Notas de Implementacion

Endpoint:
```
GET /api/copropiedades/:copId/dashboard/compromisos?actividadId=uuid
```

Response:
```json
{
  "filtro": {
    "actividad": {
      "id": "uuid",
      "nombre": "Rifa electrodomesticos"
    }
  },
  "resumen": {
    "totalCompromisos": 100,
    "porEstado": {
      "PENDIENTE": 25,
      "PARCIAL": 35,
      "CUMPLIDO": 40
    },
    "montos": {
      "totalComprometido": "10000000.00",
      "totalAportado": "6500000.00",
      "totalPendiente": "3500000.00",
      "porcentajeCumplimiento": 65.0
    }
  },
  "ultimosMovimientos": [
    {
      "apartamento": "101 - Torre A",
      "accion": "Aporte registrado",
      "monto": "50000.00",
      "fecha": "2025-01-20T10:00:00Z"
    }
  ]
}
```

## Testing

- [ ] Dashboard retorna estadisticas correctas
- [ ] Filtros funcionan correctamente
- [ ] Solo admins tienen acceso
- [ ] Performance aceptable con muchos registros
