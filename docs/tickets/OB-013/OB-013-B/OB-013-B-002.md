# OB-013-B-002: Crear templates de email

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-013 - Notificaciones |
| Story | OB-013-B - Notificaciones por email |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, templates, html |
| Depends on | OB-013-B-001 |
| Assigned | unassigned |

## Descripcion

Crear templates HTML profesionales para cada tipo de notificación por email.

## Criterios de Aceptacion

- [ ] Template base reutilizable
- [ ] Templates específicos por tipo
- [ ] Diseño responsive
- [ ] Variables dinámicas soportadas

## Notas de Implementacion

Template base:
```typescript
// src/templates/email/base.template.ts

export function baseTemplate(content: string, copropiedad: string): string {
  return `
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OpenBook</title>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; }
    .header { background: #2563eb; color: white; padding: 20px; text-align: center; }
    .content { padding: 20px; background: #f9fafb; }
    .footer { padding: 20px; text-align: center; font-size: 12px; color: #666; }
    .button { display: inline-block; padding: 12px 24px; background: #2563eb; color: white; text-decoration: none; border-radius: 4px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>OpenBook</h1>
      <p>${copropiedad}</p>
    </div>
    <div class="content">
      ${content}
    </div>
    <div class="footer">
      <p>Este correo fue enviado automáticamente por OpenBook.</p>
      <p>No responda a este mensaje.</p>
    </div>
  </div>
</body>
</html>
  `;
}
```

Templates específicos:
```typescript
// src/templates/email/cambio-visibilidad.template.ts

export function cambioVisibilidadAdminTemplate(datos: {
  nombreUsuario: string;
  visibilidadAnterior: string;
  visibilidadNueva: string;
  causal: string;
  justificacion: string;
  administrador: string;
  fecha: string;
}): string {
  return `
    <h2>Cambio en su Configuración de Visibilidad</h2>
    <p>Estimado/a ${datos.nombreUsuario},</p>
    <p>Le informamos que un administrador ha modificado su configuración de visibilidad de estados de cuenta.</p>

    <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
      <tr>
        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Visibilidad anterior:</strong></td>
        <td style="padding: 10px; border: 1px solid #ddd;">${datos.visibilidadAnterior}</td>
      </tr>
      <tr>
        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Nueva visibilidad:</strong></td>
        <td style="padding: 10px; border: 1px solid #ddd;">${datos.visibilidadNueva}</td>
      </tr>
      <tr>
        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Causal:</strong></td>
        <td style="padding: 10px; border: 1px solid #ddd;">${datos.causal}</td>
      </tr>
      <tr>
        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Justificación:</strong></td>
        <td style="padding: 10px; border: 1px solid #ddd;">${datos.justificacion}</td>
      </tr>
      <tr>
        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Realizado por:</strong></td>
        <td style="padding: 10px; border: 1px solid #ddd;">${datos.administrador}</td>
      </tr>
      <tr>
        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Fecha:</strong></td>
        <td style="padding: 10px; border: 1px solid #ddd;">${datos.fecha}</td>
      </tr>
    </table>

    <p>De acuerdo con la Ley 1581 de 2012, tiene derecho a solicitar información adicional o presentar una PQR si considera que este cambio no es procedente.</p>

    <p style="text-align: center; margin-top: 30px;">
      <a href="${process.env.APP_URL}/pqr/nueva" class="button">Crear PQR</a>
    </p>
  `;
}
```

## Testing

- [ ] Templates renderizan correctamente
- [ ] Variables se reemplazan
- [ ] Diseño responsive funciona
- [ ] Links funcionan
