# OB-013-A-002: Definir tipos de notificación

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-013 - Notificaciones |
| Story | OB-013-A - Modelo de notificaciones |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, tipos, documentacion |
| Depends on | OB-013-A-001 |
| Assigned | unassigned |

## Descripcion

Documentar los tipos de notificación, sus canales por defecto, y cuáles son obligatorias según la Ley 1581.

## Criterios de Aceptacion

- [ ] Lista completa de tipos documentada
- [ ] Clasificación obligatoria/opcional
- [ ] Canal por defecto definido
- [ ] Templates de mensaje definidos

## Notas de Implementacion

### Notificaciones Obligatorias (No Deshabilitables - Ley 1581)

| Tipo | Canal | Template |
|------|-------|----------|
| CAMBIO_VISIBILIDAD_PROPIO | AMBOS | "Su configuración de visibilidad ha cambiado a {visibilidad}" |
| CAMBIO_VISIBILIDAD_ADMIN | AMBOS | "Un administrador ha modificado su configuración de visibilidad a {visibilidad}. Causal: {causal}" |

### Notificaciones Opcionales

| Tipo | Canal Default | Template |
|------|---------------|----------|
| NUEVO_OBJETIVO | EMAIL | "Se ha creado un nuevo objetivo: {nombre}" |
| OBJETIVO_CERRADO | EMAIL | "El objetivo {nombre} ha sido cerrado" |
| NUEVA_ACTIVIDAD | IN_APP | "Nueva actividad disponible: {nombre}" |
| ACTIVIDAD_CERRADA | IN_APP | "La actividad {nombre} ha finalizado" |
| APORTE_REGISTRADO | AMBOS | "Su aporte de ${monto} ha sido registrado" |
| APORTE_CONFIRMADO | EMAIL | "Su aporte de ${monto} ha sido confirmado" |
| APORTE_ANULADO | AMBOS | "Un aporte ha sido anulado. Motivo: {motivo}" |
| PQR_CREADA | EMAIL | "Su PQR #{numero} ha sido registrada" |
| PQR_RESPONDIDA | AMBOS | "Su PQR #{numero} tiene una respuesta" |
| PQR_CERRADA | EMAIL | "Su PQR #{numero} ha sido cerrada" |
| BIENVENIDA | EMAIL | "Bienvenido a OpenBook" |
| RECORDATORIO | IN_APP | "{mensaje}" |

### Estructura de Datos por Tipo

```typescript
interface DatosNotificacion {
  // CAMBIO_VISIBILIDAD_ADMIN
  visibilidad?: string;
  causal?: string;
  justificacion?: string;
  administrador?: string;

  // APORTE
  monto?: string;
  actividad?: string;
  comprobante?: string;

  // PQR
  numeroPqr?: string;
  asunto?: string;

  // OBJETIVO/ACTIVIDAD
  nombreObjetivo?: string;
  nombreActividad?: string;
  fechaCierre?: string;
}
```

## Testing

- [ ] Documentación completa
- [ ] Obligatorias identificadas
- [ ] Templates revisados
