# OB-003-A-002: Implementar CRUD de copropiedades

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-003 - Gestion de Copropiedades y Apartamentos |
| Story | OB-003-A - Modelo y gestion de copropiedades |
| Status | pending |
| Priority | critical |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, crud, copropiedad |
| Depends on | OB-003-A-001 |
| Assigned | unassigned |

## Descripcion

Implementar los endpoints REST para crear, leer, actualizar y desactivar copropiedades. Solo usuarios con rol ADMIN pueden realizar estas operaciones.

## Contexto Tecnico

### Archivos afectados
- `src/api/routes/copropiedades.routes.ts`
- `src/api/controllers/copropiedades.controller.ts`
- `src/services/copropiedad.service.ts`
- `src/api/validators/copropiedad.validator.ts`

### Enfoque tecnico
REST API con arquitectura en capas. Proteger endpoints con middleware de autenticacion y autorizacion.

## Criterios de Aceptacion

- [ ] POST /api/copropiedades - Crear copropiedad
- [ ] GET /api/copropiedades - Listar copropiedades
- [ ] GET /api/copropiedades/:id - Obtener copropiedad
- [ ] PATCH /api/copropiedades/:id - Actualizar copropiedad
- [ ] DELETE /api/copropiedades/:id - Desactivar (soft delete)
- [ ] Todos los endpoints requieren rol ADMIN
- [ ] Validacion de datos de entrada

## Notas de Implementacion

Endpoints:
```
POST   /api/copropiedades
GET    /api/copropiedades?page=1&limit=10
GET    /api/copropiedades/:id
PATCH  /api/copropiedades/:id
DELETE /api/copropiedades/:id
```

Response crear (201):
```json
{
  "id": "uuid",
  "nombre": "Conjunto Residencial Los Pinos",
  "direccion": "Calle 123 #45-67",
  "ciudad": "Bogota",
  "cantidadUnidades": 120,
  "isActive": true,
  "createdAt": "2025-01-01T00:00:00Z"
}
```

## Testing

- [ ] CRUD funciona correctamente
- [ ] No-admin recibe 403
- [ ] Validacion rechaza datos invalidos
- [ ] Delete hace soft delete, no elimina
