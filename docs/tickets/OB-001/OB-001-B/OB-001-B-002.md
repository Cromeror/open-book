# OB-001-B-002: Instalar y configurar TypeORM

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-001 - Configuracion e Infraestructura del Proyecto |
| Story | OB-001-B - Configuracion de base de datos y ORM |
| Status | done |
| Priority | critical |
| Created | 2025-12-31 |
| Updated | 2026-01-05 |
| Labels | task, orm, typeorm |
| Depends on | OB-001-B-001 |
| Assigned | unassigned |

## Descripcion

Instalar y configurar TypeORM como ORM del proyecto en el monorepo Nx. TypeORM proporciona decoradores para definir entidades, soporte nativo para TypeScript, y migraciones automaticas.

## Contexto Tecnico

### Archivos afectados
- `apps/api/src/config/database.config.ts` (configuracion de conexion)
- `apps/api/src/entities/` (directorio de entidades)
- `apps/api/src/app.module.ts` (configuracion TypeORM en NestJS)
- `package.json` (dependencias)

### Enfoque tecnico
Instalar typeorm y @nestjs/typeorm, configurar el modulo TypeOrmModule en NestJS con el provider postgresql, y establecer la estructura de entidades.

## Criterios de Aceptacion

- [x] TypeORM instalado (typeorm, @nestjs/typeorm, pg)
- [x] TypeOrmModule configurado en AppModule con PostgreSQL
- [x] Directorio de entidades creado en apps/api/src/entities/
- [x] Scripts pnpm: typeorm:generate, typeorm:run, typeorm:revert
- [x] Conexion a base de datos verificada

## Notas de Implementacion

- Configurar TypeORM usando forRootAsync para variables de entorno
- Habilitar logging de queries en desarrollo
- Usar synchronize: false en produccion (solo migraciones)
- Configurar subscribers para auditoria automatica

## Testing

- [x] pnpm typeorm:generate ejecuta sin errores
- [x] La conexion a PostgreSQL funciona correctamente
- [x] Las entidades se registran automaticamente
