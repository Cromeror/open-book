# OB-001-A-004: Configurar variables de entorno con dotenv

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-001 - Configuracion e Infraestructura del Proyecto |
| Story | OB-001-A - Setup inicial del proyecto y dependencias |
| Status | done |
| Priority | high |
| Created | 2025-12-31 |
| Updated | 2026-01-05 |
| Labels | task, configuracion, seguridad |
| Depends on | OB-001-A-001 |
| Assigned | unassigned |

## Descripcion

Implementar gestion de variables de entorno usando dotenv, con validacion de variables requeridas y archivo de ejemplo documentado. Esto es critico para la seguridad y portabilidad del proyecto.

## Contexto Tecnico

### Archivos afectados
- `.env` (no versionado)
- `.env.example` (versionado, con valores de ejemplo)
- `src/config/env.ts` (validacion y tipado)
- `.gitignore` (asegurar que .env esta excluido)

### Enfoque tecnico
Usar dotenv para cargar variables y crear un modulo de configuracion que valide y tipee las variables de entorno al inicio de la aplicacion.

## Criterios de Aceptacion

- [x] dotenv instalado y configurado (@nestjs/config incluye dotenv)
- [x] Archivo .env.example con todas las variables documentadas
- [x] Modulo apps/api/src/config/env.ts que exporta configuracion tipada
- [x] Validacion de variables requeridas al iniciar la app (con Zod)
- [x] .env incluido en .gitignore

## Notas de Implementacion

- Variables esperadas iniciales:
  - NODE_ENV (development/production/test)
  - PORT (puerto del servidor)
  - DATABASE_URL (conexion a base de datos)
  - JWT_SECRET (para autenticacion)
  - JWT_EXPIRES_IN (expiracion de tokens)
- Usar zod o similar para validacion de esquema
- Fallar rapido si faltan variables criticas

## Testing

- [x] La app falla con mensaje claro si faltan variables requeridas
- [x] Las variables se cargan correctamente en desarrollo
- [x] El archivo .env no se sube al repositorio
