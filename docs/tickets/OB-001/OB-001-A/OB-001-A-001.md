# OB-001-A-001: Inicializar monorepo Nx con pnpm y estructura de carpetas

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-001 - Configuracion e Infraestructura del Proyecto |
| Story | OB-001-A - Setup inicial del proyecto y dependencias |
| Status | done |
| Priority | critical |
| Created | 2025-12-31 |
| Updated | 2026-01-01 |
| Labels | task, setup, estructura, nx, monorepo |
| Depends on | - |
| Assigned | unassigned |

## Descripcion

Crear la estructura base del proyecto OpenBook como monorepo Nx, inicializando con pnpm y definiendo la organizacion de carpetas que seguira el proyecto. La estructura debe facilitar la separacion de responsabilidades y permitir escalabilidad futura con apps separadas para backend (NestJS) y frontend (Next.js).

## Contexto Tecnico

### Archivos afectados
- `package.json`
- `nx.json` (configuracion Nx)
- `pnpm-workspace.yaml` (configuracion pnpm workspace)
- `apps/api/` (aplicacion NestJS)
- `apps/web/` (aplicacion Next.js)
- `libs/` (librerias compartidas)

### Enfoque tecnico
Utilizar `npx create-nx-workspace@latest` para crear el monorepo base, configurar pnpm como package manager, y generar las aplicaciones NestJS y Next.js usando los generadores de Nx.

## Criterios de Aceptacion

- [x] Monorepo Nx creado con pnpm como package manager
- [x] Aplicacion NestJS en apps/api/
- [x] Aplicacion Next.js 14 en apps/web/
- [x] Directorio libs/ para codigo compartido
- [x] Scripts basicos definidos: dev, build, start, test, lint
- [x] Archivo .gitignore configurado apropiadamente
- [x] pnpm-workspace.yaml configurado

## Notas de Implementacion

Comandos de inicializacion:
```bash
# Crear monorepo Nx
npx create-nx-workspace@latest openbook --preset=apps --pm=pnpm

# Generar app NestJS
nx g @nx/nest:app api

# Generar app Next.js
nx g @nx/next:app web
```

Estructura resultante:
```
openbook/
├── apps/
│   ├── api/           # NestJS backend
│   │   ├── src/
│   │   │   ├── app/
│   │   │   ├── main.ts
│   │   │   └── ...
│   │   └── project.json
│   └── web/           # Next.js frontend
│       ├── app/       # App Router
│       ├── public/
│       └── project.json
├── libs/              # Librerias compartidas
├── nx.json
├── package.json
├── pnpm-workspace.yaml
└── tsconfig.base.json
```

- El nombre del workspace debe ser "openbook" o "@openbook"
- Incluir carpeta docs/ para documentacion tecnica

## Testing

- [x] pnpm install ejecuta sin errores
- [x] nx serve api inicia el backend NestJS (puerto 3001)
- [x] nx dev web inicia el frontend Next.js (puerto 3000)
- [x] La estructura de carpetas existe y es accesible
- [x] .gitignore excluye node_modules, dist, .env, .nx
