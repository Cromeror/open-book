# OB-002-D-001: Crear endpoint para ver perfil propio

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-002 - Gestion de Usuarios y Autenticacion |
| Story | OB-002-D - Gestion de perfil de usuario |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, perfil |
| Depends on | OB-002-B-003 |
| Assigned | unassigned |

## Descripcion

Crear endpoint que permita a un usuario autenticado ver su informacion de perfil completa, excluyendo datos sensibles como el hash de contrasena.

## Contexto Tecnico

### Archivos afectados
- `src/api/routes/users.routes.ts`
- `src/api/controllers/users.controller.ts`
- `src/services/user.service.ts`

### Enfoque tecnico
Endpoint GET protegido que retorna datos del usuario autenticado desde req.user.id.

## Criterios de Aceptacion

- [ ] Endpoint GET /api/users/me creado
- [ ] Requiere autenticacion (token valido)
- [ ] Retorna todos los campos del perfil excepto passwordHash
- [ ] Incluye informacion de consentimiento de visibilidad
- [ ] Incluye fecha de ultimo login

## Notas de Implementacion

Response (200):
```json
{
  "id": "uuid",
  "email": "usuario@ejemplo.com",
  "firstName": "Juan",
  "lastName": "Perez",
  "phone": "+573001234567",
  "role": "RESIDENT",
  "isActive": true,
  "publicAccountConsent": true,
  "consentDate": "2025-01-01T00:00:00Z",
  "lastLoginAt": "2025-01-15T10:30:00Z",
  "createdAt": "2025-01-01T00:00:00Z",
  "updatedAt": "2025-01-10T00:00:00Z"
}
```

## Testing

- [ ] Usuario autenticado puede ver su perfil
- [ ] passwordHash no se incluye en respuesta
- [ ] Sin token retorna 401
- [ ] Datos retornados coinciden con BD
