# OB-002-C-001: Definir permisos por rol

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-002 - Gestion de Usuarios y Autenticacion |
| Story | OB-002-C - Sistema de roles y permisos |
| Status | pending |
| Priority | high |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, roles, permisos, configuracion |
| Depends on | OB-002-A-001 |
| Assigned | unassigned |

## Descripcion

Definir la matriz de permisos para cada rol del sistema (ADMIN, RESIDENT) basandose en las funcionalidades descritas en el SUMMARY.md. Esta definicion sera la base para el sistema de autorizacion.

## Contexto Tecnico

### Archivos afectados
- `src/config/permissions.ts`
- `src/types/permissions.ts`

### Enfoque tecnico
Crear enums/constantes para permisos y mapeo de rol a permisos. Facilmente extensible para nuevos permisos.

## Criterios de Aceptacion

- [ ] Enum Permission con todos los permisos del sistema
- [ ] Mapeo ROLE_PERMISSIONS definido
- [ ] Funcion hasPermission(role, permission) implementada
- [ ] Permisos documentados con descripcion
- [ ] Cobertura de todas las funcionalidades del SUMMARY.md

## Notas de Implementacion

Permisos basados en SUMMARY.md seccion 7:

**Administrador:**
- OBJETIVOS_CREATE, OBJETIVOS_EDIT, OBJETIVOS_DELETE, OBJETIVOS_VIEW
- ACTIVIDADES_CREATE, ACTIVIDADES_EDIT, ACTIVIDADES_DELETE, ACTIVIDADES_VIEW
- COMPROMISOS_CREATE, COMPROMISOS_EDIT, COMPROMISOS_VIEW
- APORTES_CREATE, APORTES_EDIT, APORTES_VIEW
- REPORTES_VIEW, REPORTES_EXPORT
- USUARIOS_MANAGE
- VISIBILIDAD_MANAGE (modificar visibilidad con justa causa)
- AUDITORIA_VIEW

**Residente:**
- OBJETIVOS_VIEW
- ACTIVIDADES_VIEW
- COMPROMISOS_VIEW (propios)
- APORTES_VIEW (propios)
- PERFIL_EDIT (propio)
- PQR_CREATE, PQR_VIEW (propias)

```typescript
export enum Permission {
  // Objetivos
  OBJETIVOS_CREATE = 'objetivos:create',
  OBJETIVOS_EDIT = 'objetivos:edit',
  OBJETIVOS_VIEW = 'objetivos:view',
  // ... etc
}
```

## Testing

- [ ] hasPermission retorna true para permisos de admin
- [ ] hasPermission retorna false para permisos no asignados
- [ ] Todos los permisos del SUMMARY estan definidos
