# OB-004-A-004: Implementar busqueda y filtros de objetivos

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-004 - Objetivos de Recaudo |
| Story | OB-004-A - Modelo y CRUD de objetivos |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, filtros, busqueda |
| Depends on | OB-004-A-002 |
| Assigned | unassigned |

## Descripcion

Implementar filtros y opciones de busqueda para el listado de objetivos, permitiendo a usuarios encontrar rapidamente objetivos especificos.

## Contexto Tecnico

### Archivos afectados
- `src/api/controllers/objetivos.controller.ts`
- `src/services/objetivo.service.ts`

### Enfoque tecnico
Query params para filtros. Usar TypeORM QueryBuilder con condiciones dinamicas.

## Criterios de Aceptacion

- [ ] Filtro por estado (activo, finalizado, etc.)
- [ ] Filtro por rango de fechas
- [ ] Busqueda por nombre (parcial)
- [ ] Ordenamiento configurable
- [ ] Paginacion con total de resultados

## Notas de Implementacion

Endpoint con filtros:
```
GET /api/copropiedades/:id/objetivos?estado=ACTIVO&fechaDesde=2025-01-01&nombre=ascensor&page=1&limit=10&orderBy=fechaInicio&order=desc
```

Response:
```json
{
  "data": [...],
  "pagination": {
    "total": 25,
    "page": 1,
    "limit": 10,
    "totalPages": 3
  }
}
```

Implementacion:
```typescript
interface ObjetivoFilters {
  estado?: EstadoObjetivo;
  fechaDesde?: Date;
  fechaHasta?: Date;
  nombre?: string;
}

function buildWhereClause(filters: ObjetivoFilters) {
  return {
    ...(filters.estado && { estado: filters.estado }),
    ...(filters.nombre && {
      nombre: { contains: filters.nombre, mode: 'insensitive' }
    }),
    ...(filters.fechaDesde && {
      fechaInicio: { gte: filters.fechaDesde }
    })
  };
}
```

## Testing

- [ ] Filtro por estado funciona
- [ ] Busqueda por nombre parcial funciona
- [ ] Paginacion retorna datos correctos
- [ ] Ordenamiento funciona en ambas direcciones
