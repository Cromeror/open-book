# OB-004-A-002: Implementar CRUD de objetivos

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-004 - Objetivos de Recaudo |
| Story | OB-004-A - Modelo y CRUD de objetivos |
| Status | pending |
| Priority | critical |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, crud, objetivo |
| Depends on | OB-004-A-001 |
| Assigned | unassigned |

## Descripcion

Implementar endpoints REST para el CRUD de objetivos de recaudo, anidados bajo la copropiedad correspondiente.

## Contexto Tecnico

### Archivos afectados
- `src/api/routes/objectives.routes.ts`
- `src/api/controllers/objectives.controller.ts`
- `src/services/objective.service.ts`
- `src/api/validators/objective.validator.ts`

### Enfoque tecnico
Endpoints protegidos por rol ADMIN. Los residentes tienen acceso de solo lectura.

## Criterios de Aceptacion

- [ ] POST /api/condominiums/:id/objectives - Crear
- [ ] GET /api/condominiums/:id/objectives - Listar
- [ ] GET /api/condominiums/:id/objectives/:id - Obtener
- [ ] PATCH /api/condominiums/:id/objectives/:id - Actualizar
- [ ] DELETE /api/condominiums/:id/objectives/:id - Soft delete
- [ ] Crear/editar/eliminar solo para admins
- [ ] Listar/obtener disponible para residentes

## Notas de Implementacion

Crear objetivo:
```
POST /api/condominiums/:condoId/objectives
Body: {
  "name": "Reparacion de ascensores",
  "description": "Mantenimiento preventivo de ascensores de todas las torres",
  "targetAmount": 15000000,
  "startDate": "2025-02-01",
  "endDate": "2025-06-30"
}
```

Response (201):
```json
{
  "id": "uuid",
  "name": "Reparacion de ascensores",
  "targetAmount": "15000000.00",
  "startDate": "2025-02-01T00:00:00Z",
  "endDate": "2025-06-30T00:00:00Z",
  "status": "ACTIVE",
  "createdAt": "2025-01-15T00:00:00Z"
}
```

## Testing

- [ ] Admin puede crear objetivo
- [ ] Residente no puede crear (403)
- [ ] Residente puede ver objetivos
- [ ] Validacion de datos funciona
