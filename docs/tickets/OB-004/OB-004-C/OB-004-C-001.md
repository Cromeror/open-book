# OB-004-C-001: Crear endpoint de objetivos para residentes

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-004 - Objetivos de Recaudo |
| Story | OB-004-C - Visualizacion de objetivos para residentes |
| Status | pending |
| Priority | medium |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, api, residentes, lectura |
| Depends on | OB-004-A-002, OB-003-C-004 |
| Assigned | unassigned |

## Descripcion

Crear endpoint optimizado para que residentes consulten los objetivos de su copropiedad, filtrando automaticamente por la copropiedad asociada a su apartamento.

## Contexto Tecnico

### Archivos afectados
- `src/api/routes/residents.routes.ts`
- `src/api/controllers/residents.controller.ts`
- `src/services/objective.service.ts`

### Enfoque tecnico
Endpoint que usa el contexto del residente para filtrar por su copropiedad automaticamente.

## Criterios de Aceptacion

- [ ] GET /api/my-objectives implementado
- [ ] Filtra automaticamente por copropiedad del residente
- [ ] Retorna solo objetivos activos por defecto
- [ ] Parametro para incluir historicos
- [ ] No expone informacion de otros apartamentos

## Notas de Implementacion

Endpoint:
```
GET /api/my-objectives?includeHistorical=true
Authorization: Bearer <token-resident>
```

Response:
```json
{
  "condominium": {
    "id": "uuid",
    "name": "Conjunto Los Pinos"
  },
  "objectives": [
    {
      "id": "uuid",
      "name": "Reparacion ascensores",
      "description": "...",
      "targetAmount": "15000000.00",
      "status": "ACTIVE",
      "startDate": "2025-02-01",
      "endDate": "2025-06-30"
    }
  ]
}
```

El endpoint usa el middleware de scope de apartamento para determinar la copropiedad del usuario.

## Testing

- [ ] Residente ve solo objetivos de su copropiedad
- [ ] Por defecto solo retorna activos
- [ ] Con parametro incluye historicos
- [ ] Sin apartamento asociado retorna error
