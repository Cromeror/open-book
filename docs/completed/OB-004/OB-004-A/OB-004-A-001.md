# OB-004-A-001: Crear entidad Objetivo con TypeORM

## Metadata

| Campo | Valor |
|-------|-------|
| Epic | OB-004 - Objetivos de Recaudo |
| Story | OB-004-A - Modelo y CRUD de objetivos |
| Status | done |
| Priority | critical |
| Created | 2025-12-31 |
| Updated | 2025-12-31 |
| Labels | task, entidad, typeorm, objetivo |
| Depends on | OB-003-A-001 |
| Assigned | unassigned |

## Descripcion

Crear la entidad Objetivo con decoradores TypeORM segun los atributos definidos en SUMMARY.md seccion 4.1: nombre, descripcion, monto objetivo, fecha inicio/fin, estado.

## Contexto Tecnico

### Archivos afectados
- `apps/api/src/entities/objetivo.entity.ts`
- `apps/api/src/types/objetivo.ts`

### Enfoque tecnico
Entidad con campos monetarios usando Column con type decimal para precision. Relacion con Copropiedad usando decoradores TypeORM.

## Criterios de Aceptacion

- [ ] Entidad Objetivo creada con decoradores TypeORM
- [ ] Campos: nombre, descripcion, montoObjetivo
- [ ] Campos de fecha: fechaInicio, fechaFin
- [ ] Campo estado con enum
- [ ] Relacion con Copropiedad
- [ ] Relacion con Actividades (para futuro)
- [ ] Hereda campos de auditoria de BaseEntity

## Notas de Implementacion

Entidad Objetivo con TypeORM:
```typescript
import { Entity, Column, ManyToOne, OneToMany, JoinColumn, Index } from 'typeorm';
import { BaseEntity } from './base.entity';
import { Copropiedad } from './copropiedad.entity';
import { Actividad } from './actividad.entity';

export enum EstadoObjetivo {
  ACTIVO = 'ACTIVO',
  PAUSADO = 'PAUSADO',
  FINALIZADO = 'FINALIZADO',
  CANCELADO = 'CANCELADO',
}

@Entity('objetivos')
export class Objetivo extends BaseEntity {
  @Column()
  nombre: string;

  @Column({ type: 'text', nullable: true })
  descripcion: string;

  @Column({ type: 'decimal', precision: 15, scale: 2 })
  montoObjetivo: number;

  @Column({ type: 'timestamp' })
  fechaInicio: Date;

  @Column({ type: 'timestamp', nullable: true })
  fechaFin: Date;

  @Column({
    type: 'enum',
    enum: EstadoObjetivo,
    default: EstadoObjetivo.ACTIVO,
  })
  estado: EstadoObjetivo;

  @Column()
  @Index()
  copropiedadId: string;

  @ManyToOne(() => Copropiedad, (cop) => cop.objetivos)
  @JoinColumn({ name: 'copropiedadId' })
  copropiedad: Copropiedad;

  // Relaciones
  @OneToMany(() => Actividad, (act) => act.objetivo)
  actividades: Actividad[];
}
```

Decimal(15, 2) permite hasta 13 digitos enteros y 2 decimales (hasta 9,999,999,999,999.99)

## Testing

- [ ] Migracion se aplica sin errores
- [ ] Se puede crear objetivo con todos los campos
- [ ] Monto se almacena con precision correcta
- [ ] Relacion con copropiedad funciona
